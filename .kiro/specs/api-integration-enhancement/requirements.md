# 需求文档

## 介绍

本功能旨在确保项目创建和灵感创建功能完全使用真实API接口，替换任何可能存在的模拟数据，并增强API集成的健壮性和用户体验。

## 需求

### 需求 1

**用户故事:** 作为一个用户，我希望创建灵感时能够直接调用后端API，这样我的数据能够被持久化存储

#### 验收标准

1. WHEN 用户填写灵感创建表单并提交 THEN 系统应该调用 `/api/inspirations` POST 接口
2. WHEN API调用成功 THEN 系统应该显示成功提示并刷新灵感列表
3. WHEN API调用失败 THEN 系统应该显示具体的错误信息给用户
4. WHEN 创建成功后 THEN 新创建的灵感应该立即出现在灵感列表中

### 需求 2

**用户故事:** 作为一个用户，我希望创建项目时能够直接调用后端API，这样我的项目能够被正确创建并生成相应的任务

#### 验收标准

1. WHEN 用户填写项目创建表单并提交 THEN 系统应该调用 `/api/projects` POST 接口
2. WHEN 项目创建成功 THEN 系统应该自动触发任务图生成
3. WHEN API调用成功 THEN 系统应该显示成功提示并刷新项目列表
4. WHEN API调用失败 THEN 系统应该显示具体的错误信息给用户
5. WHEN 创建成功后 THEN 新创建的项目应该立即出现在项目列表中

### 需求 3

**用户故事:** 作为一个用户，我希望在网络错误或API不可用时能够得到清晰的反馈，这样我知道问题所在

#### 验收标准

1. WHEN API服务器不可用 THEN 系统应该显示"服务器连接失败"的错误信息
2. WHEN 网络请求超时 THEN 系统应该显示"请求超时，请重试"的错误信息
3. WHEN 服务器返回4xx错误 THEN 系统应该显示具体的业务错误信息
4. WHEN 服务器返回5xx错误 THEN 系统应该显示"服务器内部错误"的通用错误信息

### 需求 4

**用户故事:** 作为一个用户，我希望在提交表单时能够看到加载状态，这样我知道系统正在处理我的请求

#### 验收标准

1. WHEN 用户提交创建表单 THEN 提交按钮应该显示加载状态并禁用
2. WHEN API调用进行中 THEN 表单应该显示加载指示器
3. WHEN API调用完成 THEN 加载状态应该被清除
4. WHEN 用户在加载期间尝试重复提交 THEN 系统应该阻止重复提交

### 需求 5

**用户故事:** 作为一个用户，我希望表单验证能够在客户端和服务端都生效，这样我能够得到及时的反馈

#### 验收标准

1. WHEN 用户输入无效数据 THEN 客户端应该立即显示验证错误
2. WHEN 服务端返回验证错误 THEN 系统应该将错误信息映射到对应的表单字段
3. WHEN 必填字段为空 THEN 系统应该阻止表单提交并显示错误提示
4. WHEN 数据格式不正确 THEN 系统应该显示格式要求的提示信息

### 需求 6

**用户故事:** 作为一个用户，我希望能够看到项目类型的选项，这样我能够选择合适的项目类型来创建项目

#### 验收标准

1. WHEN 用户打开项目创建表单 THEN 系统应该调用 `/api/project-types` 接口获取可用的项目类型
2. WHEN 项目类型加载成功 THEN 下拉选择框应该显示所有激活的项目类型
3. WHEN 项目类型加载失败 THEN 系统应该显示错误信息并提供重试选项
4. WHEN 用户选择项目类型 THEN 表单应该根据项目类型的默认参数预填充相关字段